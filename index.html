<!文档类型 html
公共 “-//W3C//DTD XHTML 1.0 Transitional//EN” “http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd”>
<HTML XMLNS=“http://www.w3.org/1999/xhtml” XML：lang=“en">

<头>
  <meta http-equiv=“Content-Type” content=“text/html;charset=UTF-8">
  <风格>
    身体 {
      保证金： 0;
      填充： 0;
      溢出：隐藏;
    }

.城市 {
      宽度： 100%;
      位置：固定;
      底部：0像素;
      Z 指数：100;
    }

.城市图像 {
      宽度： 100%;
    }

    #标签，
    #额外 {
      /* 颜色： RGB（106， 17， 11）;*/

      颜色： #DAF6ff;
      文本阴影： 0 0 20 像素 #0aafe6， 0 0  20像素 RGBA（10， 175，  230，   0 );
      字体粗细：粗体;
      字体大小：3.8雷姆;
      位置：固定;
      宽度： 100大众;
      文本对齐：居中;
      不透明度：0;
      过渡：所有 0.5s 缓出;
      Z 指数：100;
      顶部：30%;
    }

    #标签。隐藏 {
      不透明度：0;
      变换：缩放（1);
    }

    #标签。显示，
    #额外。显示 {
      不透明度：1;
      Z 指数：100;
      变换：缩放（1.3);
    }
  </风格>
  <title>2023新年快乐</title>
</头>

<body onselectstart=“return false">
  <canvas id='cas' style=“background-color：rgba（0，5，24，1）”>浏览器不支持canvas</canvas>
  <div id=“labels”></div>
  <div class=“city”><img src=“city.png” alt=“” /></div>
  <img src=“moon.png” alt=“” id=“moon” style=“visibility： hidden;" />
  <div 样式=“显示：无">
    <div class=“shape”>2023新年快乐</div>
    <div class=“shape”>兔年大吉</div>
    <div class=“shape”>ヾ（^∀^）ノ</div>
  </迪夫>
  <音频 src=“boom.mp3” 预加载=“auto”></音频>
  <音频 src=“boom.mp3” 预加载=“auto”></音频>
  <音频 src=“boom.mp3” 预加载=“auto”></音频>
  <音频 src=“boom.mp3” 预加载=“auto”></音频>
  <音频 src=“boom.mp3” 预加载=“auto”></音频>
  <音频 src=“boom.mp3” 预加载=“auto”></音频>
  <audio src=“shotfire.mp3” preload=“auto”></audio >
  <audio src=“shotfire.mp3” preload=“auto”></audio >
  <audio src=“shotfire.mp3” preload=“auto”></audio >
  <脚本>
    让星数 = 1500;
    让 starArr = 新数组();

     💗 ‼️ ‼️ 想要说的话在这里 💗
    常量my_labels = [
      “我很幸运”，
      “遇到一个善良的女孩”，
      “她很可爱，很乖”，
      “也很漂亮，很温柔”，
      “但是有时候也很气人”，
      “她是我的女朋友”，
      “同样也是我的精神支柱”，
      “是我疲惫的港湾”，
      “还是我未来的老婆”，
      “她的出现让我对生活有了期待”，
      “谢谢你靠近我，了解我”，
      “温暖我，治愈我，陪着我”，
      “谢谢你能来爱我”，
      “我也爱你，会永远爱你”，
      “我的大美女老婆”，
      “💗周婷大美女💗”，
      “2023快乐”，
      “新的一年也要开心快乐”，
      “健健康康，平安喜乐”，
      "我一直在哦"
    ];


    var canvas = 文档。getElementById（“cas”);
    var ocas = 文档。createElement（“canvas”);
    var octx = ocas。getContext（“2d”);
    var ctx = 画布。getContext（“2d”);
    奥卡斯。宽度 = 画布。宽度 = 窗口。内宽;
    奥卡斯。高度 = 画布。高度 = 窗口。内高;
    VaR Bigbooms = [];

    窗口。加载 = 函数 () {
      初始化动画();

      常量标签 = 文档。getElementById（“labels”);
      对于（设 i = 0; 我<my_labels。长度; 我++) {
        设置超时(() => {
          labels.className = “hide”;
          标签。innerHTML = my_labels[i];
          标签。类名 = “显示”;
          如果（我<my_labels。长度 - 1) {
            设置超时(() => {
              标签。类名 = “隐藏”;
            }， 3000);
          }
        }， 3500 * （i + 1));
      }

      对于（设 i = 0; 我<星数; 我++) {
        让星=  新星更多();
        星。随机颜色();
        星际到达。推（星形);
      }

      显示明星();
    }

    函数初始化动画() {
      drawBg();

      上次时间 = 新日期();
      动画();
    }

    var lastTime;
    函数动画() {
      CTX.救();
      CTX.全局复合操作 = “目的地输出”;
      CTX.全球阿尔法 = 0.1;
      CTX.fillRect（0， 0， canvas.宽度，画布。高度);
      CTX.恢复();

      var newTime = new Date();
      如果 （新时间 - 上次时间 > 200 + （窗口。内部高度 - 767） / 2) {
        var random = 数学。随机（） * 100 > 2 ？真 ： 假;
        var x = getRandom（canvas.宽度 / 5，帆布。宽度 * 4 / 5);
        var y = getRandom（50， 200);
        如果（随机）) {
          var bigboom = new Boom（getRandom（canvas.宽度 / 3，帆布。宽度 *  2 / 3）， 2， “#FFF”， { x： x， y：  y });
          大轰。推（大轰)
        }
        还 {
          var bigboom = new Boom（getRandom（canvas.宽度 / 3，帆布。宽度 * 2 / 3）， 2， “#FFF”， {
            X：帆布。宽度 / 2，
            Y： 200
          }、文档。querySelectorAll（“.shape”）[parseInt（getRandom（0， document.querySelectorAll（“.shape”）。长度))]);
          大轰。推（大轰)
        }
        上次时间 = 新时间;
      }

      星星。foreach（function () {
        这。漆();
      })

      画月亮();

      大轰。foreach（function （index) {
        var 那 = 这个;
        如果（！这。死) {
          这。_移动();
          这。_drawLight();
        }
        还 {
          这。轰隆隆。foreach（function （index) {
            如果（！这。死) {
              这。移动到（索引);
            }
            否则如果（索引 === 那个。轰隆隆。长度 - 1) {
              大轰。拼接（大繁荣。indexOf（that）， 1);
            }
          })
        }
      });

      RAF（动画);
    }

    函数绘制月亮() {
      var moon = 文档。getElementById（“moon”);
      var centerX = canvas。宽度 - 200，中心 Y  = 100，宽度 = 80;
      如果（月亮。完成) {
        CTX.绘制图像（月亮，中心X，中心Y，宽度，宽度 )
      }
      还 {
        月亮。加载 = 函数 () {
          CTX.绘制图像（月亮，中心X，中心Y，宽度，宽度 )
        }
      }
      变量指数 = 0;
      对于 （变量 i = 0; 我<10; 我++) {
        CTX.救();
        CTX.开始路径();
        CTX.arc（centerX + width / 2， centerY  + width / 2，  width    / 2  + index， 0，   2 * 数学。 圆周率);
        CTX.fillStyle = “rgba（240，219，120，0.005）”;
        索引 += 2;
        CTX.填补();
        CTX.恢复();
      }

    }

    数组。原型。foreach = 函数（回调）) {
      对于 （变量 i = 0; 我<这个。长度; 我++) {
        if （this[i] ！== null） 回调。申请（这[i]， [i])
      }
    }

    var raf = 窗口。请求动画帧|| 窗口。webkitRequestAnimationFrame || 窗口。mozRequestAnimationFrame || 窗口。o请求动画帧|| 窗口。msRequestAnimationFrame || 函数（回调) {
      窗口。设置超时（回调， 1000 / 10);
    };

    帆布。点击 = 函数 () {
      变量 x = 事件。客户端X;
      var y = 事件。客户端 Y;
      var bigboom = new Boom（getRandom（canvas.宽度 / 3，帆布。宽度 *  2 / 3）， 2， “#FFF”， { x： x， y：  y });
      大轰。推（大轰)
    }

    var 动臂 = 函数 （x， r， c， 动臂区域， 形状) {
      这。繁荣 = [];
      这。 x = x;
      这。y = （画布。高度 + R);
      这。 r = r;
      这。 c = c;
      这。形状 = 形状|| 假;
      这。繁荣区域 = 繁荣区域;
      这。θ = 0;
      这。死 = 假;
      这。ba = parseInt（getRandom（80， 200));

      VAR 音频 = 文档。getElementsByTagName（“audio”);
      对于 （变量 i = 0; 我<音频。长度; 我++) {
        如果（音频[i]。来源。indexOf（“shotfire”） >= 0 && （audio[i].暂停||  音频[i]。结束)) {
          音频[i]。玩();
          破;
        }
      }
    }
    轰。原型 = {
      _paint：功能 () {
        CTX.救();
        CTX.开始路径();
        CTX.弧（这个。x，这个。是的，这个。r， 0， 2 * 数学。圆周率);
        CTX.填充样式 = 这个。C;
        CTX.填补();
        CTX.恢复();
      },
      _move：功能 () {
        var dx = this。轰隆隆。x - 这个。x， dy = 这个。轰隆隆。y - 这个。y;
        这。x = 这个。x + 深 x * 0.01;
        这。y = 这个。y + dy * 0.01;

        如果（数学。abs（dx） <= this.学士和数学。abs（dy） <= this。八) {
          如果（这个。形状) {
            这。_shapBoom();
          }
          否则这个。_繁荣();
          这。死 = 真;
        }
        还 {
          这。_漆();
        }
      },
      _drawLight：功能 () {
        CTX.救();
        CTX.fillStyle = “rgba（255，228，150，0.3）”;
        CTX.开始路径();
        CTX.弧（这个。x，这个。是的，这个。r + 3 * 数学。random（） + 1， 0， 2 * 数学。圆周率);
        CTX.填补();
        CTX.恢复();
      },
      _boom：功能 () {
        var fragNum = getRandom（100， 300);
        var style  = getRandom（0， 10） >= 5 ？1 ： 2;
        变量颜色;
        if （样式 === 1) {
          颜色 = {
            a： parseInt（getRandom（128， 255）），
            b： parseInt（getRandom（128， 255）），
            c： parseInt（getRandom（128， 255))
          }
        }

        var fanwei = fragNum;
        VAR 音频 = 文档。getElementsByTagName（“audio”);
        对于 （变量 i = 0; 我<音频。长度; 我++) {
          如果（音频[i]。来源。indexOf（“boom”） >= 0 && （audio[i].暂停||  音频[i]。结束)) {
            音频[i]。玩();
            破;
          }
        }
        对于 （变量 i = 0; 我<碎片; 我++) {
          if （样式 === 2) {
            颜色 = {
              a： parseInt（getRandom（128， 255）），
              b： parseInt（getRandom（128， 255）），
              c： parseInt（getRandom（128， 255))
            }
          }
          var a = getRandom（-Math.圆周率，数学。圆周率);
          var x = getRandom（0， fanwei） * Math.cos（a） + 这个。x;
          var y = getRandom（0， fanwei） * Math.罪（a） + 这个。y;
          var radius = getRandom（0， 2)
          var frag = new Frag（this.x，这个。y， 半径， 颜色， x， y);
          这。轰隆隆。推（碎片）);
        }
      },
      _shapBoom：功能 () {
        var 那 = 这个;
        putValue（ocas， octx， this.形状， 5， 函数 （点) {
          var dx = 画布。宽度 / 2 - 那个。x;
          var dy = canvas。高度 / 2 - 那个。y;
          对于 （变量 i = 0; 我<点。长度; 我++) {
            颜色 = { a： 点[i]。A，B：点[i]。b， c： 点[i].C }
            var x = 点[i]。x;
            var y = 点[i]。y;
            无功半径 = 1;
            var frag = new Frag（that.x，那个。y， 半径， 颜色， x - dx， y - dy );
            那个。轰隆隆。推（碎片）);
          }
        })
      }
    }

    函数 putValue（canvas， context， ele， dr， callback) {
      上下文。clearRect（0， 0， canvas.宽度，画布。高度);
      var img = 新图像();
      如果（ele.内部HTML。indexOf（“img”） >= 0) {
        图片。src = ele。getElementsByTagName（“img”）[0].来源;
        imgload（img， function () {
          上下文。drawImage（img， canvas.宽度 / 2 - 图像。宽度 / 2，帆布。高度 / 2 - 图像。宽度 / 2);
          dots = getimgData（canvas， context， dr);
          回调（点);
        })
      }
      还 {
        变量文本 = ELE。内部网页;
        上下文。救();
        var fontSize = 200;
        上下文。字体 = 字体大小 + “px 宋体 粗体”;
        上下文。文本对齐 = “中心”;
        上下文。文本基线 = “中间”;
        上下文。fillStyle = “rgba（” + parseInt（getRandom（128， 255）） + “，” + parseInt（getRandom（128， 255）） +  “，”    +  parseInt（getRandom（128， 255）） + “ ， 1）”;
        上下文。填充文本（文本，画布。宽度 / 2，帆布。身高 / 2);
        上下文。恢复();
        dots = getimgData（canvas， context， dr);
        回调（点);
      }
    }

    函数 imgload（img， 回调）) {
      如果（图像。完成) {
        回调。呼叫（图像);
      }
      还 {
        图片。加载 = 函数 () {
          回调。呼叫（此);
        }
      }
    }

    function getimgData（canvas， context， dr) {
      var imgData = context.getImageData（0， 0， canvas.宽度，画布。高度);
      上下文。clearRect（0， 0， canvas.宽度，画布。高度);
      变量点 = [];
      对于 （变量 x  = 0; x < imgData。宽度; X += 博士) {
        对于 （变量 y = 0; y < imgData.身高; y += 博士) {
          var i = （y * imgData.宽度 + x） * 4;
          如果（图像数据。数据[i + 3] > 128) {
            var dot = { x： x， y： y， a： imgData. data[i]， b： imgData.data[i + 1]， c： imgData.数据[I + 2] };
            点。推（点);
          }
        }
      }
      返回点;
    }

    函数 getRandom（a， b) {
      返回数学。随机（） * （b - a） + a ;
    }


    var 最大半径 = 1，星星 = [];
    函数 drawBg() {
      对于 （变量 i = 0; 我<100; 我++) {
        var r = 数学。随机（） * 最大半径;
        var x = 数学。随机（） * 画布。宽度;
        var y = 数学。随机（）  * 2 * 画布。高度 - 帆布。高度;
        var 星 = 新星（x， y， r);
        星星。推（星形);
        星。漆()
      }

    }

    var 星号 = 函数 （x， y， r) {
      这。 x = x;
      这。 y = y;
      这。 r = r;
    }
    明星。原型 = {
      油漆：功能 () {
        CTX.救();
        CTX.开始路径();
        CTX.弧（这个。x，这个。是的，这个。r， 0， 2 * 数学。圆周率);
        CTX.fillStyle = “rgba（255，255，255，” + this.r + ")";
        CTX.填补();
        CTX.恢复();
      }
    }

    无功焦距 = 250;
    var Frag = 函数 （centerX， centerY， radius， color， tx， ty) {
      这。tx = tx;
      这。 ty = ty;
      这。x = 中心X;
      这。y = 中心 Y;
      这。死 = 假;
      这。中心X = 中心X;
      这。中心Y = 中心 Y;
      这。半径 = 半径;
      这。颜色 = 颜色;
    }

    弗拉格。原型 = {
      油漆：功能 () {
        ctx.beginPath（）;
        ctx.arc（this.x ， this.y ， this.radius ， 0 ， 2*Math.PI）;
        CTX.fillStyle = “rgba（” + this.颜色。a + “”，“+ 这个。 颜色。b + “，” + 这个。 颜色。c + “，1）”;
        CTX.填充矩形（这个。x - 这个。半径，这个。y - 这个。半径，这个。半径 * 2，这个。半径 * 2)
      },
      移动到：函数（索引）) {
        这。ty = 这个。ty + 0.3;
        var dx = this。德克萨斯州 - 这个。x， dy = 这个。泰 - 这个。y;
        这。x = 数学。abs（dx） < 0.1 ？这。TX ： （这个。x + dx * 0.1);
        这。y = 数学。绝对（dy） < 0.1 ？这。泰：（这个。y + dy * 0.1);
        if （dx === 0 && Math.绝对值（dy） <= 80) {
          这。死 = 真;
        }
        这。漆();
      }
    }


    让星星更多 = 函数 () {
      这。x = 窗口。内部宽度 * 数学。随机();
      这。y = 5000 * 数学。随机();
      这。文本 =“.”;
      这。颜色 = “白色”;
      这。随机颜色 = 函数 () {
        设_r=数学。随机();
        如果 （_r <  0.5) {
          这。颜色 =“#333”;
        } 还 {
          这。颜色 = “白色”;
        }
      };
    };
    功能展示明星() {
      让画布 = 文档。getElementById（“cas”);
      上下文 = 画布。getContext（“2d”);

      对于（设 n = 0; n <星计数; n++) {
        星际到达[n]。随机颜色();
        上下文。fillStyle = starArr[n].颜色;
        上下文。fillText（starArr[n].文本，星形[n]。x， starArr[n].y);
      }
    }
  </脚本>
</身体>

</.html>
